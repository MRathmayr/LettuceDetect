========================================
Benchmark Validation Run (10 samples, 3B, both transformers)
========================================
Job ID: 7249243
Node: n3074-014
Start time: Thu Feb 12 06:43:38 CET 2026
========================================
Python 3.12.10
PyTorch: 2.10.0+cu128, CUDA: True, GPUs: 2
name, memory.total [MiB]
NVIDIA A100-PCIE-40GB, 40960 MiB
NVIDIA A100-PCIE-40GB, 40960 MiB

Running validation (10 samples, 3B probe, both transformers)...
Loading RAGTruth (limit=10)...
Loaded 10 samples (10 valid)
Task types: {'summary': 10}

============================================================
PHASE 1: Model-Independent Components
============================================================

[1/5] Lexical Overlap...
     lexical [summary]: AUROC=0.667, F1=0.500, OptF1=0.571, n=10
   AUROC: 0.667, OptF1: 0.571, Latency: 5.39ms

[2/5] Numeric Validator...
     numeric [summary]: AUROC=0.500, F1=0.000, OptF1=0.462, n=10
   AUROC: 0.500, OptF1: 0.462, Latency: 1.01ms

[3/5] NER Verifier...
     ner [summary]: AUROC=0.905, F1=0.000, OptF1=0.857, n=10
   AUROC: 0.905, OptF1: 0.857, Latency: 101.25ms

[4/5] Model2Vec (NCS)...
     model2vec [summary]: AUROC=0.524, F1=0.000, OptF1=0.545, n=10
   AUROC: 0.524, OptF1: 0.545, Latency: 2.90ms

[5/5] NLI Detector...
     nli [summary]: AUROC=0.786, F1=0.600, OptF1=0.667, n=10
   AUROC: 0.786, OptF1: 0.667, Latency: 127.45ms, GPU: 3495MB

[Stage 2] Full pipeline (NLI-only)...
     stage2 [summary]: AUROC=0.714, F1=0.600, OptF1=0.600, n=10
   AUROC: 0.714, OptF1: 0.600, Latency: 59.50ms, GPU: 3495MB

============================================================
PHASE 2: Stage 3 Standalone (LLM-only, run once per model)
============================================================

[Stage 3] 3B (Qwen/Qwen2.5-3B-Instruct) â€” PCA 512...
   [GPU] before loading 3b: 8MB allocated, 20MB reserved
   [GPU] after loading 3b: 2954MB allocated, 2986MB reserved
     stage3_3b [summary]: AUROC=0.667, F1=0.500, OptF1=0.500, n=10
   AUROC: 0.667, OptF1: 0.500, Latency: 101.51ms, GPU: 3470MB
   [GPU] after cleanup 3b: 9MB allocated, 22MB reserved

============================================================
PHASE 3: Transformer-Dependent Benchmarks
============================================================

--- TRANSFORMER: base (KRLabsOrg/lettucedect-base-modernbert-en-v1) ---

[Transformer] base standalone...
   [GPU] transformer base loaded: 598MB allocated, 610MB reserved
     transformer_base [summary]: AUROC=0.500, F1=0.000, OptF1=0.462, n=10
   AUROC: 0.500, OptF1: 0.462, Latency: 36.96ms, GPU: 640MB

[Stage 1] base + lexical + model2vec...
     stage1_base [summary]: AUROC=0.500, F1=0.000, OptF1=0.462, n=10
   AUROC: 0.500, OptF1: 0.462, Latency: 62.33ms, GPU: 640MB

[Cascade 1+2] base...
     cascade_12_base [summary]: AUROC=0.619, F1=0.000, OptF1=0.571, n=10
   AUROC: 0.619, OptF1: 0.571, Latency: 59.68ms, GPU: 4027MB
   Routing: 10/10 (100.0%) resolved at Stage 1

  [Cascade 1+3] base + 3B...
   [GPU] before cascade [1,3] base+3b: 9MB allocated, 22MB reserved
   [GPU] cascade [1,3] base+3b loaded: 3544MB allocated, 3580MB reserved
     cascade_13_base_3b [summary]: AUROC=0.619, F1=0.000, OptF1=0.571, n=10
   AUROC: 0.619, OptF1: 0.571, Latency: 61.84ms, GPU: 3586MB
   Routing: 10/10 (100.0%) resolved at Stage 1
   [GPU] after cleanup cascade [1,3] base+3b: 9MB allocated, 22MB reserved

==========================================================================================
SUMMARY: base + 3B
==========================================================================================

Component                   AUROC   F1@0.5    OptF1    Latency        P95   GPU MB
------------------------------------------------------------------------------------------
lexical                     0.667    0.500    0.571      5.4ms      7.1ms        -
numeric                     0.500    0.000    0.462      1.0ms      1.4ms        -
ner                         0.905    0.000    0.857    101.2ms    143.8ms        -
model2vec                   0.524    0.000    0.545      2.9ms     11.2ms        -
nli                         0.786    0.600    0.667    127.5ms    407.8ms     3495
transformer_base            0.500    0.000    0.462     37.0ms     63.3ms      640
------------------------------------------------------------------------------------------
stage2                      0.714    0.600    0.600     59.5ms     61.3ms     3495
stage3_3b                   0.667    0.500    0.500    101.5ms    222.3ms     3470
stage1_base                 0.500    0.000    0.462     62.3ms     79.1ms      640
------------------------------------------------------------------------------------------
cascade_12_base             0.619    0.000    0.571     59.7ms     77.7ms     4027
cascade_13_base_3b          0.619    0.000    0.571     61.8ms     78.5ms     3586
==========================================================================================

==========================================================================================
PER-TASK BREAKDOWN
==========================================================================================

Component                Task Type       AUROC   F1@0.5    OptF1      N
------------------------------------------------------------------------------------------
lexical                  summary         0.667    0.500    0.571     10

numeric                  summary         0.500    0.000    0.462     10

ner                      summary         0.905    0.000    0.857     10

model2vec                summary         0.524    0.000    0.545     10

nli                      summary         0.786    0.600    0.667     10

transformer_base         summary         0.500    0.000    0.462     10

stage2                   summary         0.714    0.600    0.600     10

stage3_3b                summary         0.667    0.500    0.500     10

stage1_base              summary         0.500    0.000    0.462     10

cascade_12_base          summary         0.619    0.000    0.571     10

cascade_13_base_3b       summary         0.619    0.000    0.571     10

==========================================================================================
Results saved to: tests/benchmarks/results/benchmark_base_3b_20260212_064356.json
   [GPU] after base complete cleanup: 9MB allocated, 22MB reserved

--- TRANSFORMER: large (KRLabsOrg/lettucedect-large-modernbert-en-v1) ---

[Transformer] large standalone...
   [GPU] transformer large loaded: 1519MB allocated, 1632MB reserved
     transformer_large [summary]: AUROC=0.667, F1=0.500, OptF1=0.500, n=10
   AUROC: 0.667, OptF1: 0.500, Latency: 65.88ms, GPU: 1593MB

[Stage 1] large + lexical + model2vec...
     stage1_large [summary]: AUROC=0.667, F1=0.500, OptF1=0.500, n=10
   AUROC: 0.667, OptF1: 0.500, Latency: 87.50ms, GPU: 1593MB

[Cascade 1+2] large...
     cascade_12_large [summary]: AUROC=0.905, F1=0.500, OptF1=0.800, n=10
   AUROC: 0.905, OptF1: 0.800, Latency: 86.47ms, GPU: 5006MB
   Routing: 9/10 (90.0%) resolved at Stage 1

  [Cascade 1+3] large + 3B...
   [GPU] before cascade [1,3] large+3b: 9MB allocated, 22MB reserved
   [GPU] cascade [1,3] large+3b loaded: 4467MB allocated, 4588MB reserved
     cascade_13_large_3b [summary]: AUROC=0.905, F1=0.000, OptF1=0.800, n=10
   AUROC: 0.905, OptF1: 0.800, Latency: 99.39ms, GPU: 4980MB
   Routing: 9/10 (90.0%) resolved at Stage 1
   [GPU] after cleanup cascade [1,3] large+3b: 9MB allocated, 22MB reserved

==========================================================================================
SUMMARY: large + 3B
==========================================================================================

Component                   AUROC   F1@0.5    OptF1    Latency        P95   GPU MB
------------------------------------------------------------------------------------------
lexical                     0.667    0.500    0.571      5.4ms      7.1ms        -
numeric                     0.500    0.000    0.462      1.0ms      1.4ms        -
ner                         0.905    0.000    0.857    101.2ms    143.8ms        -
model2vec                   0.524    0.000    0.545      2.9ms     11.2ms        -
nli                         0.786    0.600    0.667    127.5ms    407.8ms     3495
transformer_large           0.667    0.500    0.500     65.9ms     81.6ms     1593
------------------------------------------------------------------------------------------
stage2                      0.714    0.600    0.600     59.5ms     61.3ms     3495
stage3_3b                   0.667    0.500    0.500    101.5ms    222.3ms     3470
stage1_large                0.667    0.500    0.500     87.5ms    115.2ms     1593
------------------------------------------------------------------------------------------
cascade_12_large            0.905    0.500    0.800     86.5ms    148.8ms     5006
cascade_13_large_3b         0.905    0.000    0.800     99.4ms    169.7ms     4980
==========================================================================================

==========================================================================================
PER-TASK BREAKDOWN
==========================================================================================

Component                Task Type       AUROC   F1@0.5    OptF1      N
------------------------------------------------------------------------------------------
lexical                  summary         0.667    0.500    0.571     10

numeric                  summary         0.500    0.000    0.462     10

ner                      summary         0.905    0.000    0.857     10

model2vec                summary         0.524    0.000    0.545     10

nli                      summary         0.786    0.600    0.667     10

transformer_large        summary         0.667    0.500    0.500     10

stage2                   summary         0.714    0.600    0.600     10

stage3_3b                summary         0.667    0.500    0.500     10

stage1_large             summary         0.667    0.500    0.500     10

cascade_12_large         summary         0.905    0.500    0.800     10

cascade_13_large_3b      summary         0.905    0.000    0.800     10

==========================================================================================
Results saved to: tests/benchmarks/results/benchmark_large_3b_20260212_064356.json
   [GPU] after large complete cleanup: 9MB allocated, 22MB reserved

Total time: 106.8s (1.8m)

========================================
Validation Complete - Thu Feb 12 06:45:47 CET 2026
========================================
-rw-r--r-- 1 mrathmayr p73025 6.7K Feb 12 06:45 /gpfs/data/fs73025/mrathmayr/LettuceDetect/tests/benchmarks/results/benchmark_base_3b_20260212_064356.json
-rw-r--r-- 1 mrathmayr p73025 6.8K Feb 12 06:45 /gpfs/data/fs73025/mrathmayr/LettuceDetect/tests/benchmarks/results/benchmark_large_3b_20260212_064356.json
